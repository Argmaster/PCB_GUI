<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>PCB assembler 3D GUI</title>

        <link rel="stylesheet" href="../../data/assets/themes/default.css" />
        <link rel="stylesheet" id="theme-style" href="" />
        <link rel="stylesheet" href="../css/index.css" />
        <link rel="stylesheet" href="../css/models.css" />
        <link rel="stylesheet" href="../css/gerber.css" />
        <link rel="stylesheet" href="../css/global.css" />
        <link
            rel="stylesheet"
            href="../../node_modules/jquery-ui-dist/jquery-ui.theme.min.css"
        />
        <script>
            const $ = (jQuery = require("jquery"));
        </script>
        <script src="../../node_modules/jquery/dist/jquery.min.js"></script>
        <script src="../../node_modules/jquery-ui-dist/jquery-ui.min.js"></script>
        <script defer>
            const fs = require("fs");
            const dialog = require("electron").remote.dialog;
            const UserPref = require("../js/userpref").UserPref;

            const userpref = new UserPref();

            function makeDataDirs() {
                if (!fs.existsSync("./blender/blender.exe")) {
                    dialog.showErrorBox(
                        "blender.exe not found.",
                        "Unable to find blender executable, exiting."
                    );
                    let w = remote.getCurrentWindow();
                    w.close();
                }
                try {
                    if (fs.existsSync("./temp")) {
                        fs.rmdirSync("./temp", { recursive: true });
                    }
                    fs.mkdirSync("./temp");
                } catch (e) {}
                try {
                    fs.mkdirSync("./data");
                } catch (e) {}
                try {
                    fs.mkdirSync("./data/user");
                } catch (e) {}
                try {
                    fs.mkdirSync("./data/assets");
                } catch (e) {}
                try {
                    fs.mkdirSync("./data/assets/models");
                } catch (e) {}
                try {
                    fs.mkdirSync("./data/assets/templates");
                } catch (e) {}
            }
            makeDataDirs();
        </script>
        <script defer src="../js/global.js"></script>
        <script defer src="../js/models.js"></script>
        <script defer src="../js/gerber.js"></script>
    </head>
    <body>
        <div id="global-container">
            <nav id="bookmarks-container">
                <div id="bookmarks-container-overflow">
                    <div class="bookmark-box bookmark-inactive">Global</div>
                    <div class="bookmark-box bookmark-inactive">Models</div>
                    <div class="bookmark-box bookmark-inactive">Gerber</div>
                </div>
            </nav>
            <main id="workspace-container">
                <div class="workspace-box">
                    <div class="global-logo-container">
                        <img
                            class="global-logo"
                            src="../../data/assets/img/logo-big.png"
                        />
                        <div class="global-logo-title">PCB Assembler 3D</div>
                    </div>
                    <div class="globals-flex-container">
                        <div class="global-content-box">
                            <div class="global-content-box-title">
                                Template Assets
                            </div>
                        </div>
                        <div class="global-content-box">
                            <div class="global-content-box-title">
                                Model Assets
                            </div>
                        </div>
                        <div class="global-content-box">
                            <div class="global-content-box-title">Settings</div>
                            <div class="global-content-section">
                                <div class="global-content-section-row">
                                    <div class="glob-sub-cont">
                                        <div class="global-content-label">
                                            Available GUI themes
                                        </div>
                                    </div>
                                    <div class="glob-sub-cont">
                                        <select
                                            class="standard-text-input"
                                            id="theme-select"
                                        ></select>
                                    </div>
                                </div>
                                <div class="global-content-section-row">
                                    <div class="glob-sub-cont">
                                        <div class="global-content-label">
                                            Font size
                                        </div>
                                    </div>
                                    <div class="glob-sub-cont">
                                        <input
                                            type="number"
                                            max="36"
                                            min="10"
                                            value="14"
                                            class="standard-text-input global-number-in"
                                            id="font-size"
                                            placeholder="14"
                                        />
                                        px
                                    </div>
                                </div>
                                <div class="global-content-section-row">
                                    <div class="glob-sub-cont">
                                        <div class="global-content-label">
                                            Autosave delay
                                        </div>
                                    </div>
                                    <div class="glob-sub-cont">
                                        <input
                                            type="number"
                                            max="10000"
                                            min="100"
                                            value="1000"
                                            class="standard-text-input global-number-in"
                                            id="autosave-delay"
                                            placeholder="1000"
                                        />
                                        ms
                                    </div>
                                </div>
                                <div class="global-content-section-row">
                                    <div class="glob-sub-cont">
                                        <div class="global-content-label">
                                            Rendering engine
                                        </div>
                                    </div>
                                    <div class="glob-sub-cont">
                                        <select
                                            class="standard-text-input"
                                            id="rendering-engine"
                                            placeholder="EEVEE"
                                        >
                                            <option value="EEVEE">Eevee</option>
                                            <option value="CYCLES">
                                                Cycles
                                            </option>
                                        </select>
                                    </div>
                                </div>
                                <div class="global-content-section-row">
                                    <div class="glob-sub-cont">
                                        <div class="global-content-label">
                                            Rendering samples
                                        </div>
                                    </div>
                                    <div class="glob-sub-cont">
                                        <input
                                            type="number"
                                            max="256"
                                            min="1"
                                            value="32"
                                            class="standard-text-input global-number-in"
                                            id="rendering-samples"
                                            placeholder="32"
                                        />
                                    </div>
                                </div>
                                <div class="global-content-box-title">
                                    Debug
                                </div>
                                <div id="debug-settings"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="workspace-box">
                    <div id="model-workspace-box">
                        <div id="model-box-container"></div>
                        <div id="model-edit-panel"></div>
                    </div>
                </div>
                <div class="workspace-box">
                    <div class="gerber-container">
                        <div class="gerber-left-panel">
                            <div class="gerber-preview">
                                <img
                                    id="gerber-preview"
                                    src="../../data/assets/img/img-broken.svg"
                                />
                            </div>
                            <div class="gerber-panel-buttons">
                                <div>
                                    <div class="progress-bar-container">
                                        <div
                                            class="progress-bar stripes-animated"
                                        >
                                            <span
                                                class="progress-bar-inner stripes-animated"
                                                id="gerber-progress"
                                            ></span>
                                            <span id="gerber-progress-label"
                                                >0/0</span
                                            >
                                        </div>
                                    </div>
                                </div>
                                <div class="div-button" id="generate-gerber">
                                    Generate 3D model
                                </div>
                                <div
                                    class="div-button"
                                    id="recoginze-gerber-dir"
                                >
                                    Recognize files from directory
                                </div>
                                <div class="div-button" id="save-gerber-layers">
                                    Save configuration
                                </div>
                                <div class="div-button" id="load-gerber-layers">
                                    Load configuration
                                </div>
                            </div>
                        </div>
                        <div class="gerber-right-panel">
                            <div class="gerber-layer-container">
                                <h1 class="gerber-header">Geber top layers</h1>
                                <div class="gereber-sublabel">Bottom most</div>
                                <div
                                    class="gerber-layer-list"
                                    id="gerber-layers-top"
                                ></div>
                                <div class="gereber-sublabel">Top most</div>
                                <div
                                    class="div-button centered gerber-add-layer"
                                >
                                    Add layer
                                </div>
                            </div>
                            <div class="gerber-layer-container">
                                <h1 class="gerber-header">
                                    Geber bottom layers
                                </h1>
                                <div class="gereber-sublabel">Bottom most</div>
                                <div
                                    class="gerber-layer-list"
                                    id="gerber-layers-bot"
                                ></div>
                                <div class="gereber-sublabel">Top most</div>
                                <div
                                    class="div-button centered gerber-add-layer"
                                >
                                    Add layer
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </body>
</html>
